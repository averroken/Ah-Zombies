{"version":3,"sources":["mini_game.js"],"names":["TopDownGame","gameProperties","screenWidth","screenHeight","states","game","player","enemy","bullets","background","firebutton","enemies","weapon","fireRate","nextFire","mini_game","prototype","create","add","tileSprite","physics","startSystem","Phaser","Physics","ARCADE","group","enableBody","physicsBodyType","i","world","randomX","randomY","name","body","immovable","anchor","setTo","width","height","scale","callAll","sprite","arcade","enable","allowRotation","collideWorldBounds","bulletSpeed","trackSprite","this","input","activePointer","isDown","update","overlap","killEnemy","keyboard","Keyboard","LEFT","x","RIGHT","UP","y","DOWN","Q","D","Z","S","rotation","angleToPointer","SPACEBAR","fire","bullet","kill","animations","play","events","onAnimationComplete","console","log","render","debug"],"mappings":"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","file":"mini_game.js","sourcesContent":["'use strict';\n\nvar TopDownGame = TopDownGame || {};\nvar gameProperties = {\n    screenWidth: '100%',\n    screenHeight: '100%'\n};\nvar states = {\n    game: \"game\"\n};\nvar player;\nvar enemy;\nvar bullets;\nvar background;\nvar firebutton;\nvar enemies;\nvar weapon;\nvar fireRate = 100;\nvar nextFire = 0;\nvar game = TopDownGame.game;\n\nTopDownGame.mini_game = function () {};\n\nTopDownGame.mini_game.prototype = {\n    create: function create() {\n        background = game.add.tileSprite(0, 0, 1920, 1080, \"background\");\n\n        // enemy = game.add.sprite(Math.floor((Math.random()*300)+200),Math.floor((Math.random()*300)+200), 'enemy');\n        //     var walk = enemy.animations.add('walk', [40, 41, 42, 43, 44, 45, 46], 10, true);\n        //     var die = enemy.animations.add('die', [57, 58, 59, 60, 61, 62, 63,64,65,66,67,68,69,70,71,72], 10, true);\n        //\n        //     enemy.animations.play('walk', 15, true);\n\n        game.physics.startSystem(Phaser.Physics.ARCADE);\n\n        //Enemy\n        enemies = game.add.group();\n        enemies.enableBody = true;\n        enemies.physicsBodyType = Phaser.Physics.ARCADE;\n        for (var i = 0; i < 150; i++) {\n            enemy = enemies.create(game.world.randomX, game.world.randomY, 'enemy', 0);\n            enemy.name = 'enemy' + i;\n            enemy.body.immovable = true;\n            enemy.anchor.setTo(0.5);\n            enemy.body.width = 60;\n            enemy.body.height = 50;\n            enemy.scale.setTo(1, 1);\n        }\n\n        enemies.callAll('animations.add', 'animations', 'walk', [40, 41, 42, 43, 44, 45, 46], 15, true);\n\n        enemies.callAll('animations.add', 'animations', 'die', [66, 67, 68, 69, 70, 71, 72], 10, true);\n\n        enemies.callAll('animations.play', 'animations', 'walk');\n\n        player = game.add.sprite(400, 300, 'player2');\n        game.physics.arcade.enable([player]);\n        //Player\n\n        player.anchor.setTo(0.5, 0.5);\n        player.scale.setTo(0.3, 0.3);\n        player.body.allowRotation = false;\n        player.body.collideWorldBounds = true;\n\n        //Weapon\n        weapon = game.add.weapon(30, 'bullet');\n        weapon.fireRate = fireRate;\n        weapon.bulletSpeed = 2000;\n        weapon.trackSprite(player, 0, 15, true);\n        firebutton = this.input.activePointer.isDown;\n    },\n    update: function update() {\n        //game.physics.arcade.collide(enemies,weapon.bullets);\n        game.physics.arcade.overlap(weapon.bullets, enemies, this.killEnemy, null, this);\n        // enemies.forEach(function(enemy){\n        //     enemy.body.onCollide = new Phaser.Signal();\n        //     enemy.body.onCollide.add(killEnemy, this)\n        // });\n\n        if (game.input.keyboard.isDown(Phaser.Keyboard.LEFT)) {\n            player.x -= 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)) {\n            player.x += 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.UP)) {\n            player.y -= 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.DOWN)) {\n            player.y += 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.Q)) {\n            player.x -= 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.D)) {\n            player.x += 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.Z)) {\n            player.y -= 4;\n        }\n        if (game.input.keyboard.isDown(Phaser.Keyboard.S)) {\n            player.y += 4;\n        }\n        player.rotation = game.physics.arcade.angleToPointer(player);\n        if (game.input.activePointer.isDown || game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)) {\n            weapon.fire();\n        }\n    },\n    killEnemy: function killEnemy(enemy, bullet) {\n        if (!bullet || !enemy) {\n            return;\n        }\n        bullet.kill();\n        enemy.animations.play('die', 15, false, true);\n        enemy.body.width = 0;\n        enemy.body.height = 0;\n        enemy.events.onAnimationComplete.add(function () {\n            console.log('Enemy is killed');\n            enemy.kill();\n        });\n    },\n    render: function render() {\n        weapon.debug();\n    }\n};"]}