"use strict";var TopDownGame=TopDownGame||{},gameProperties={screenWidth:"100%",screenHeight:"100%"},states={game:"game"},player,enemy,bullets,background,firebutton,enemies,weapon,fireRate=100,nextFire=0,game=TopDownGame.game;TopDownGame.mini_game=function(){},TopDownGame.mini_game.prototype={create:function(){background=this.game.add.tileSprite(0,0,1920,1080,"background"),this.position||(this.position="down"),game.physics.startSystem(Phaser.Physics.ARCADE),enemies=game.add.group(),enemies.enableBody=!0,enemies.physicsBodyType=Phaser.Physics.ARCADE;for(var e=0;e<150;e++)enemy=enemies.create(game.world.randomX,game.world.randomY,"enemy",0),enemy.name="enemy"+e,enemy.body.immovable=!0,enemy.anchor.setTo(.5),enemy.body.width=60,enemy.body.height=50,enemy.scale.setTo(1,1);enemies.callAll("animations.add","animations","walk",[40,41,42,43,44,45,46],15,!0),enemies.callAll("animations.add","animations","die",[66,67,68,69,70,71,72],10,!0),enemies.callAll("animations.play","animations","walk"),player=game.add.sprite(400,300,"player2"),game.physics.arcade.enable([player]),player.anchor.setTo(.5,.5),player.scale.setTo(.3,.3),player.body.allowRotation=!1,player.body.collideWorldBounds=!0,weapon=game.add.weapon(30,"bullet"),weapon.fireRate=fireRate,weapon.bulletSpeed=2e3,weapon.trackSprite(player,0,15,!0),firebutton=this.input.activePointer.isDown},update:function(){game.physics.arcade.overlap(weapon.bullets,enemies,this.killEnemy,null,this),game.input.keyboard.isDown(Phaser.Keyboard.LEFT)&&(player.x-=4),game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&(player.x+=4),game.input.keyboard.isDown(Phaser.Keyboard.UP)&&(player.y-=4),game.input.keyboard.isDown(Phaser.Keyboard.DOWN)&&(player.y+=4),game.input.keyboard.isDown(Phaser.Keyboard.Q)&&(player.x-=4),game.input.keyboard.isDown(Phaser.Keyboard.D)&&(player.x+=4),game.input.keyboard.isDown(Phaser.Keyboard.Z)&&(player.y-=4),game.input.keyboard.isDown(Phaser.Keyboard.S)&&(player.y+=4),player.rotation=game.physics.arcade.angleToPointer(player),(game.input.activePointer.isDown||game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR))&&weapon.fire()},killEnemy:function(e,a){a&&e&&(a.kill(),e.animations.play("die",15,!1,!0),e.body.width=0,e.body.height=0,e.events.onAnimationComplete.add(function(){console.log("Enemy is killed"),e.kill()}))},render:function(){weapon.debug()}};
//# sourceMappingURL=mini_game.js.map
